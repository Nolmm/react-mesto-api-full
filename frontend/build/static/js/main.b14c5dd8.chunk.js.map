{"version":3,"sources":["images/logo.svg","components/Header.js","components/PopupWithForm.js","components/ImagePopup.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","utils/Api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/FormAuthLog.js","components/Login.js","components/Register.js","utils/Auth.js","components/ProtectedRoute.js","components/InfoTooltip.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Header","props","className","src","Logo","loggedIn","to","setLink","link","title","email","type","onClick","PopupWithForm","isOpen","name","onClose","formName","noValidate","onSubmit","children","buttonTitle","ImagePopup","Object","keys","card","length","alt","CurrentUserContext","React","createContext","Card","currentUser","useContext","cardDeleteButtonClassName","owner","_id","cardLikeButtonClassName","likes","some","i","onCardDelete","onCardClick","onCardLike","Main","onEditAvatar","avatar","about","onEditProfile","onAddPlace","cards","map","key","Footer","api","baseUrl","token","this","_baseUrl","_token","url","fetch","method","headers","authorization","then","res","ok","json","Promise","reject","status","value","body","JSON","stringify","values","item","EditProfilePopup","useState","setName","description","setDescription","useEffect","id","required","minLength","maxLength","placeholder","onChange","e","target","preventDefault","onUpdateUser","EditAvatarPopup","avatarRef","useRef","ref","onUpdateAvatar","current","AddPlacePopup","newCard","setNewCard","evt","FormAuthLog","setEmail","setPassword","route","linkTitle","Login","password","Register","auth","options","_headers","data","statusText","jwt","localStorage","getItem","ProtectedRoute","Component","component","InfoTooltip","success","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setcurrentUser","setCards","headerLink","setHeaderLink","setLoggedIn","history","useHistory","tooltip","setTooltip","closeAllPopups","all","getItems","cardsData","userData","catch","err","console","log","getToken","push","Provider","removeItem","exact","path","deleteItems","putLike","newCards","c","filter","login","setItem","register","patchUserInfo","newUserInfo","userAvatar","patchAvatar","newUserAvatar","cardData","postNewCard","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"yHAAAA,EAAOC,QAAU,IAA0B,kC,sKCiB5BC,MAbf,SAAgBC,GACd,OACE,4BAAQC,UAAU,UAChB,yBAAKA,UAAU,eAAeC,IAAKC,MAClCH,EAAMI,SAAW,GAAK,kBAAC,IAAD,CAAMH,UAAU,eAAeI,GAAE,WAAML,EAAMM,QAAQC,KAAO,SAAW,WAAcP,EAAMM,QAAQE,OAC1H,yBAAKP,UAAS,4BAAuBD,EAAMI,SAAW,GAAK,iCAC3D,wBAAIH,UAAU,iBAAiBD,EAAMS,OACrC,4BAAQR,UAAU,iBAAiBS,KAAK,SAASC,QAASX,EAAMW,SAAhE,qCCMSC,MAff,SAAuBZ,GACrB,OACE,6BAASC,UAAWD,EAAMa,OAAN,uBAA+Bb,EAAMc,KAArC,wCAA2Ed,EAAMc,OACnG,yBAAKb,UAAU,oBACb,4BAAQS,KAAK,SAAST,UAAU,gCAAgCU,QAASX,EAAMe,UAC/E,wBAAId,UAAU,gBAAgBD,EAAMQ,OACpC,0BAAMM,KAAMd,EAAMgB,SAAUf,UAAU,cAAcgB,YAAU,EAACC,SAAUlB,EAAMkB,UAC5ElB,EAAMmB,SACP,4BAAQT,KAAK,SAAST,UAAU,wBAAwBD,EAAMoB,iBCMzDC,MAdf,SAAoBrB,GAClB,OACE,6BAASC,UAAWqB,OAAOC,KAAKvB,EAAMwB,MAAMC,OAAS,EAAjC,sEAClB,yBAAKxB,UAAU,6BACb,4BAAQS,KAAK,SAAST,UAAU,oCAAoCU,QAASX,EAAMe,UACnF,4BAAQd,UAAU,iBAChB,yBAAKyB,IAAK1B,EAAMwB,KAAKV,KAAMZ,IAAKF,EAAMwB,KAAKjB,KAAMN,UAAU,eAC3D,gCAAYA,UAAU,qBAAqBD,EAAMwB,KAAKV,UCRnDa,EAAqBC,IAAMC,gBCkDzBC,MAhDf,SAAc9B,GACZ,IAAM+B,EAAcH,IAAMI,WAAWL,GAK/BM,EAHQjC,EAAMwB,KAAKU,MAAMC,MAAQJ,EAAYI,IAIzC,yCAA2C,kBAoB/CC,EAHUpC,EAAMwB,KAAKa,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,MAAQJ,EAAYI,OAIrD,uCAAyC,iBAGrD,OACE,wBAAIlC,UAAU,uBACZ,4BAAQA,UAAU,oBAChB,4BAAQS,KAAK,QAAQT,UAAWgC,EAA2BtB,QAfjE,WACEX,EAAMwC,aAAaxC,EAAMwB,SAerB,yBAAKvB,UAAU,kBAAkBC,IAAKF,EAAMwB,KAAKjB,KAAMmB,IAAK1B,EAAMwB,KAAKV,KAAMH,QAxBnF,WACEX,EAAMyC,YAAYzC,EAAMwB,SAwBpB,gCAAYvB,UAAU,wBACpB,wBAAIA,UAAU,mBAAmBD,EAAMwB,KAAKV,MAC5C,yBAAKb,UAAU,wBACb,4BAAQS,KAAK,SAAST,UAAWmC,EAAyBzB,QAxBpE,WACEX,EAAM0C,WAAW1C,EAAMwB,SAwBf,0BAAMvB,UAAU,yBAAyBD,EAAMwB,KAAKa,MAAMZ,aCEvDkB,MAtCf,SAAc3C,GACZ,IAAM+B,EAAcH,IAAMI,WAAWL,GAErC,OACE,8BACE,6BAAS1B,UAAU,WACjB,yBAAKA,UAAU,iBAAiBU,QAASX,EAAM4C,cAC7C,yBAAK1C,IAAK6B,EAAYc,OAAQ5C,UAAU,kBAAkByB,IAAI,6BAC9D,yBAAKzB,UAAU,4BAGjB,yBAAKA,UAAU,iBACb,yBAAKA,UAAU,oBACb,wBAAIA,UAAU,kBAAkB8B,EAAYjB,MAC5C,uBAAGb,UAAU,qBAAqB8B,EAAYe,QAChD,4BAAQpC,KAAK,SAAST,UAAU,uBAAuBU,QAASX,EAAM+C,iBAExE,4BAAQrC,KAAK,SAAST,UAAU,sBAAsBU,QAASX,EAAMgD,cAEvE,6BAAS/C,UAAU,YACjB,wBAAIA,UAAU,kBACXD,EAAMiD,MAAMC,KAAI,SAAC1B,EAAMW,GAAP,OACf,kBAAC,EAAD,CAAMgB,IAAK3B,EAAKW,IACdX,KAAMA,EACNiB,YAAazC,EAAMyC,YACnBC,WAAY1C,EAAM0C,WAClBF,aAAcxC,EAAMwC,oBAI5B,kBAAC,EAAD,CACEhB,KAAMxB,EAAMwB,KACZT,QAASf,EAAMe,UACjB,kBAAC,EAAD,CAAeD,KAAK,WAAWN,MAAM,2DAAcY,YAAY,mBC9BtDgC,MARf,WACE,OACE,6BAASnD,UAAU,UACjB,uBAAGA,UAAU,qBAAb,4B,gBCkHSoD,EADH,I,WArHR,WAAYC,EAASC,GAAQ,oBACzBC,KAAKC,SAAWH,EAChBE,KAAKE,OAASH,E,qDAITI,GACL,OAAOC,MAAoCJ,KAAKC,SAAWE,EAAK,CAC5DE,OAAQ,MACRC,QAAS,CACLC,cAAeP,KAAKE,OACpB,eAAgB,sBAInBM,MAAK,SAACC,GACH,OAAIA,EAAIC,GACGD,EAAIE,OAERC,QAAQC,OAAR,gDAA0BJ,EAAIK,c,oCAInCX,EAAKY,GACf,OAAOX,MAAoCJ,KAAKC,SAAWE,EAAK,CAC5DE,OAAQ,QACRC,QAAS,CACLC,cAAeP,KAAKE,OACpB,eAAgB,oBAEpBc,KAAMC,KAAKC,UAAU,CACjB5D,KAAmCyD,EAAMzD,KACzCgC,MAAkCyB,EAAMzB,UAG3CkB,MAAK,SAAAC,GACF,OAAIA,EAAIC,GACGD,EAAIE,OAERC,QAAQC,OAAR,gDAA0BJ,EAAIK,c,kCAKrCX,EAAKgB,GACb,OAAOf,MAAMJ,KAAKC,SAAWE,EAAK,CAC9BE,OAAQ,OACRC,QAAS,CACLC,cAAeP,KAAKE,OACpB,eAAgB,oBAEpBc,KAAMC,KAAKC,UAAU,CACjB5D,KAAM6D,EAAO7D,KACbP,KAAMoE,EAAOpE,SAGhByD,MAAK,SAAAC,GACF,OAAIA,EAAIC,GACGD,EAAIE,OAERC,QAAQC,OAAR,gDAA0BJ,EAAIK,c,kCAIrCX,EAAKiB,GACb,OAAOhB,MAAMJ,KAAKC,SAAWE,EAAK,CAC9BE,OAAQ,QACRC,QAAS,CACLC,cAAeP,KAAKE,OACpB,eAAgB,oBAEpBc,KAAMC,KAAKC,UAAU,CACjB7B,OAAQ+B,EAAK/B,WAGhBmB,MAAK,SAAAC,GACF,OAAIA,EAAIC,GACGD,EAAIE,OAERC,QAAQC,OAAR,gDAA0BJ,EAAIK,c,kCAKrCX,GACR,OAAOC,MAAMJ,KAAKC,SAAWE,EAAK,CAC9BE,OAAQ,SACRC,QAAS,CACLC,cAAeP,KAAKE,OACpB,eAAgB,sBAGnBM,MAAK,SAAAC,GACF,OAAIA,EAAIC,GACGD,EAAIE,OAERC,QAAQC,OAAR,gDAA0BJ,EAAIK,c,8BAIzCX,GACJ,OAAOC,MAAMJ,KAAKC,SAAWE,EAAK,CAC9BE,OAAQ,MACRC,QAAS,CACLC,cAAeP,KAAKE,OACpB,eAAgB,sBAGnBM,MAAK,SAAAC,GACF,OAAIA,EAAIC,GACGD,EAAIE,OAERC,QAAQC,OAAR,gDAA0BJ,EAAIK,gB,KAKzC,CAAQ,+CAAgD,wCCpErDO,MA9Cf,SAA0B7E,GAAQ,IAAD,EACP4B,IAAMkD,SAAS,IADR,mBACxBhE,EADwB,KAClBiE,EADkB,OAEOnD,IAAMkD,SAAS,IAFtB,mBAExBE,EAFwB,KAEXC,EAFW,KAGzBlD,EAAcH,IAAMI,WAAWL,GA0BrC,OAxBAC,IAAMsD,WAAU,WACdH,EAAQhD,EAAYjB,MACpBmE,EAAelD,EAAYe,SAC1B,CAACf,IAsBF,kBAAC,EAAD,CAAejB,KAAK,eAAeN,MAAM,4HAAwBQ,SAAS,YAAYG,SACpF,oCACE,2BAAOT,KAAK,OAAOI,KAAK,OAAOqE,GAAG,aAAalF,UAAU,+BAA+BmF,UAAQ,EAACC,UAAU,IAAIC,UAAU,KAAKC,YAAY,qBACxIC,SAvBR,SAA0BC,GACxBV,EAAQU,EAAEC,OAAOnB,QAsBiBA,MAAOzD,GAAQ,KAE7C,0BAAMqE,GAAG,mBAAmBlF,UAAU,sBAAtC,yHACA,2BAAOS,KAAK,OAAOI,KAAK,MAAMqE,GAAG,YAAYlF,UAAU,8BAA8BmF,UAAQ,EAACC,UAAU,IAAIC,UAAU,MAAMC,YAAY,6CACtIC,SAvBR,SAAiCC,GAC/BR,EAAeQ,EAAEC,OAAOnB,QAsBiBA,MAAOS,GAAe,KAC3D,0BAAMG,GAAG,kBAAkBlF,UAAU,sBAArC,0HAGFmB,YAAY,yDAAYP,OAAQb,EAAMa,OAAQE,QAASf,EAAMe,QAASG,SAvB1E,SAAsBuE,GAEpBA,EAAEE,iBAGF3F,EAAM4F,aAAa,CACjB9E,OACAgC,MAAOkC,QCHEa,MAtBf,SAAyB7F,GACvB,IAAM8F,EAAYlE,IAAMmE,SASxB,OACE,kBAAC,EAAD,CAAejF,KAAK,aAAaN,MAAM,wFAAkBQ,SAAS,cAAcG,SAC9E,oCACE,2BAAO6E,IAAKF,EAAWpF,KAAK,MAAMyE,GAAG,eAAerE,KAAK,OAAOyE,YAAY,uCAAStF,UAAU,iCAAiCmF,UAAQ,EAACC,UAAU,MACnJ,0BAAMF,GAAG,qBAAqBlF,UAAU,sBAAxC,0HAGFmB,YAAY,yDAAYP,OAAQb,EAAMa,OAAQE,QAASf,EAAMe,QAASG,SAd1E,SAAsBuE,GACpBA,EAAEE,iBAEF3F,EAAMiG,eAAe,CACnBpD,OAAQiD,EAAUI,QAAQ3B,YC6BjB4B,MApCf,SAAuBnG,GAAQ,IAAD,EACE4B,IAAMkD,SAAS,CAAEhE,KAAM,GAAIP,KAAM,KADnC,mBACrB6F,EADqB,KACZC,EADY,KAkB5B,OACE,kBAAC,EAAD,CAAevF,KAAK,WAAWN,MAAM,gEAAcQ,SAAS,WAAWG,SACrE,oCACE,2BAAOqE,SAlBb,SAAyBc,GACvBD,EAAW,2BAAKD,GAAN,IAAetF,KAAMwF,EAAIZ,OAAOnB,UAiBJ7D,KAAK,OAAOI,KAAK,YAAYqE,GAAG,mBAAmBI,YAAY,mDACjGtF,UAAU,wCAAwCmF,UAAQ,EAACC,UAAU,IAAIC,UAAU,KACnFf,MAAO6B,EAAQtF,OAEf,0BAAMqE,GAAG,yBAAyBlF,UAAU,sBAA5C,yHACA,2BAAOuF,SAnBb,SAAyBc,GACvBD,EAAW,2BAAKD,GAAN,IAAe7F,KAAM+F,EAAIZ,OAAOnB,UAkBJ7D,KAAK,MAAMI,KAAK,WAAWqE,GAAG,kBAAkBI,YAAY,qGAC9FtF,UAAU,uCAAuCmF,UAAQ,EAACb,MAAO6B,EAAQ7F,OACzE,0BAAM4E,GAAG,wBAAwBlF,UAAU,sBAA3C,6GAGFmB,YAAY,6CAAUP,OAAQb,EAAMa,OAAQE,QAASf,EAAMe,QAASG,SApBxE,SAAsBoF,GACpBA,EAAIX,iBACJ3F,EAAMgD,WAAWoD,O,OCYNG,MAzBf,SAAqBvG,GAWrB,OACE,0BAAMC,UAAU,WAAWiB,SAL7B,SAAwBoF,GACpBA,EAAIX,iBACJ3F,EAAMkB,aAIN,wBAAIjB,UAAU,mBAAmBD,EAAMQ,OACvC,yBAAKP,UAAU,uBACb,2BAAOuF,SAdX,SAA2Bc,GACzBtG,EAAMwG,SAASF,EAAIZ,OAAOnB,QAaW7D,KAAK,QAAQT,UAAU,kBAAkBsF,YAAY,QAAQH,UAAQ,IACxG,2BAAOI,SAZb,SAA8Bc,GAC1BtG,EAAMyG,YAAYH,EAAIZ,OAAOnB,QAWW7D,KAAK,WAAWT,UAAU,kBAAkBsF,YAAY,uCAASH,UAAQ,KAEjH,4BAAQ1E,KAAK,SAAST,UAAU,2BAA2BD,EAAMoB,aACjE,kBAAC,IAAD,CAAMnB,UAAU,iBAAiBI,GAAIL,EAAM0G,OAAQ1G,EAAM2G,aCG9CC,MAvBf,SAAe5G,GAAQ,IAAD,EACM4B,IAAMkD,SAAS,IADrB,mBACbrE,EADa,KACN+F,EADM,OAEY5E,IAAMkD,SAAS,IAF3B,mBAEb+B,EAFa,KAEHJ,EAFG,KAepB,OAXA7E,IAAMsD,WAAU,WACdlF,EAAMM,QAAQ,CAACE,MAAO,+DAAcD,MAAM,MAC3C,IAUC,kBAAC,EAAD,CAAaC,MAAM,2BAAOY,YAAY,iCAAQuF,UAAY,uMAC1DD,MAAM,UAAUxF,SATlB,WACElB,EAAMkB,SAAS,CACb2F,SAAUA,EACVpG,MAAOA,KAOT+F,SAAaA,EACbC,YAAgBA,KCQLK,MA3Bf,SAAkB9G,GAAQ,IAAD,EACK4B,IAAMkD,SAAS,IADpB,mBACdrE,EADc,KACP+F,EADO,OAEW5E,IAAMkD,SAAS,IAF1B,mBAEd+B,EAFc,KAEJJ,EAFI,KAerB,OAXA7E,IAAMsD,WAAU,WACZlF,EAAMM,QAAQ,CAAEE,MAAO,iCAASD,MAAM,MACvC,IASM,kBACL,EADK,CACOC,MAAQ,qEACpBY,YAAc,+GACduF,UAAY,sJACZD,MAAQ,UACRxF,SAZJ,WACIlB,EAAMkB,SAAS,CACX2F,SAAUA,EACVpG,MAAOA,KAUX+F,SAAaA,EACbC,YAAgBA,KC0BTM,EAPF,I,WA3CT,WAAYC,GAAU,oBAClBxD,KAAKC,SAAWuD,EAAQ1D,QACxBE,KAAKyD,SAAWD,EAAQlD,Q,qDAInBoD,GACL,OAAOtD,MAAM,GAAD,OAAIJ,KAAKC,SAAT,WAA4B,CAChCI,OAAQ,OACRC,QAASN,KAAKyD,SACdzC,KAAMC,KAAKC,UAAU,CACjBmC,SAAUK,EAAKL,SACfpG,MAAOyG,EAAKzG,UAGnBuD,MAAK,SAACC,GAAD,OAASA,EAAIC,GAAKD,EAAIE,OAASC,QAAQC,OAAR,UAAkBJ,EAAIK,OAAtB,YAAgCL,EAAIkD,kB,4BAG3ED,GACF,OAAOtD,MAAM,GAAD,OAAIJ,KAAKC,SAAT,WAA4B,CAChCI,OAAQ,OACRC,QAASN,KAAKyD,SACdzC,KAAMC,KAAKC,UAAU,CACjBmC,SAAUK,EAAKL,SACfpG,MAAOyG,EAAKzG,UAGnBuD,MAAK,SAACC,GAAD,OAASA,EAAIC,GAAKD,EAAIE,OAASC,QAAQC,OAAR,UAAkBJ,EAAIK,OAAtB,YAAgCL,EAAIkD,kB,iCAI7E,IAAMC,EAAMC,aAAaC,QAAQ,OACjC,OAAO1D,MAAM,GAAD,OAAIJ,KAAKC,SAAT,aAA8B,CAClCI,OAAQ,MACRC,QAAQ,2BACDN,KAAKyD,UADL,IAEH,cAAgB,UAAhB,OAA2BG,OAGlCpD,MAAK,SAAAC,GAAG,OAAIA,EAAIC,GAAKD,EAAIE,OAASC,QAAQC,OAAR,UAAkBJ,EAAIK,OAAtB,YAAgCL,EAAIkD,oB,KAItE,CAAS,CAClB7D,QAAS,gCACTQ,QAAS,CACL,eAAgB,sB,QCpCTyD,MATf,YAA6D,IAAxBC,EAAuB,EAAlCC,UAAyBzH,EAAS,6BAC1D,OACE,kBAAC,IAAD,MAEI,kBAAyB,IAAnBA,EAAMI,SAAoB,kBAACoH,EAAcxH,GAAY,kBAAC,IAAD,CAAUK,GAAG,gBCQhEqH,MAZhB,SAAqB1H,GACnB,OACE,6BAASC,UAAS,gBAAWD,EAAMgH,QAAQnG,OAAS,eAAiB,KACnE,yBAAKZ,UAAU,0CACf,4BAAQS,KAAK,SAAST,UAAU,gCAAgCU,QAASX,EAAMe,UAC/E,yBAAKd,UAAS,sBAAiBD,EAAMgH,QAAQW,QAAU,sBAAwB,sBAC/E,wBAAI1H,UAAU,qBAAqBD,EAAMgH,QAAQxG,UCwPxCoH,MA9Of,WAAgB,IAAD,EAC+ChG,IAAMkD,UAAS,GAD9D,mBACN+C,EADM,KACkBC,EADlB,OAEyClG,IAAMkD,UAAS,GAFxD,mBAENiD,EAFM,KAEeC,EAFf,OAG6CpG,IAAMkD,UAAS,GAH5D,mBAGNmD,EAHM,KAGiBC,EAHjB,OAI2BtG,IAAMkD,SAAS,IAJ1C,mBAINqD,EAJM,KAIQC,EAJR,OAKyBxG,IAAMkD,SAAS,IALxC,mBAKN/C,EALM,KAKOsG,EALP,OAMazG,IAAMkD,SAAS,IAN5B,mBAMN7B,EANM,KAMCqF,EAND,OAOuB1G,IAAMkD,SAAS,CAACtE,MAAO,GAAID,MAAM,IAPxD,mBAONgI,EAPM,KAOMC,EAPN,OAQa5G,IAAMkD,SAAS,IAR5B,mBAQNrE,EARM,KAQC+F,EARD,OASmB5E,IAAMkD,UAAS,GATlC,mBASN1E,EATM,KASIqI,EATJ,KAUPC,GAAUC,cAVH,GAWiB/G,IAAMkD,SAAS,CAC3CjE,QAAQ,EACRL,MAAO,GACPmH,SAAS,IAdE,qBAWNiB,GAXM,MAWGC,GAXH,MAyFb,SAASC,KACPZ,GAAyB,GACzBJ,GAA0B,GAC1BE,GAAuB,GACvBI,EAAgB,IAChBS,GAAW,2BACND,IADK,IAER/H,QAAQ,KAkGZ,OArJAe,IAAMsD,WAAU,WACdd,QAAQ2E,IAAI,CAAC1F,EAAI2F,SAAS,SAAU3F,EAAI2F,SAAS,cAC9ChF,MAAK,YAA4B,IAAD,mBAAzBiF,EAAyB,KAAdC,EAAc,KAC/BZ,EAASW,GACTZ,EAAea,MAEhBC,OAAM,SAACC,GACNC,QAAQC,IAAIF,QAGhB,IAKFxH,IAAMsD,WAAU,WACFmC,aAAaC,QAAQ,QAE/BP,EAAKwC,WACFvF,MAAK,SAACC,GACLA,EAAIiD,KAAOuB,GAAY,GAAQA,GAAY,GAC3CjC,EAASvC,EAAIiD,KAAKzG,OAClBiI,GAAQc,KAAK,QAEdL,OAAM,SAAAC,GAAG,OAAIC,QAAQC,IAAIF,QAE7B,CAAChJ,IA4HF,kBAACuB,EAAmB8H,SAApB,CAA6BlF,MAAOxC,GAClC,yBAAK9B,UAAU,QACb,kBAAC,EAAD,CAAQK,QAASiI,EAAY9H,MAAOA,EAAOL,SAAUA,EAAUO,QATvE,WACE0G,aAAaqC,WAAW,OACxBjB,GAAY,GACZC,GAAQc,KAAK,cAOP,kBAAC,IAAD,KACA,kBAAC,EAAD,CAAgBG,OAAK,EAACC,KAAK,IACzBxJ,SAAUA,EACVqH,UAAW9E,EACXC,aAjIR,WACEsF,GAAyB,IAiInBnF,cA9HR,WACE+E,GAA0B,IA8HpB9E,WA3HR,WACEgF,GAAuB,IA2HjBjH,QAAS+H,GACTrG,YAzHR,SAAyB8B,GACvB6D,EAAgB7D,IAyHV/C,KAAM2G,EACNzF,WA/LR,SAAwBlB,IAENA,EAAKa,MAAMC,MAAK,SAAAC,GAAC,OAAIA,EAAEJ,MAAQJ,EAAYI,OAGNkB,EAAIwG,YAAJ,sBAA+BrI,EAAKW,MAA7EkB,EAAIyG,QAAJ,sBAA2BtI,EAAKW,OAAqD6B,MAAK,SAACoC,GAErG,IAAM2D,EAAW9G,EAAMC,KAAI,SAAC8G,GAAD,OAAOA,EAAE7H,MAAQX,EAAKW,IAAMiE,EAAU4D,KAEjE1B,EAASyB,MAEVZ,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAoLR5G,aAhLR,SAA0BhB,GACxB6B,EAAIwG,YAAJ,gBAAyBrI,EAAKW,MAC3B6B,MAAK,WAEJ,IAAM+F,EAAW9G,EAAMgH,QAAO,SAAC/D,GAAD,OAAaA,EAAQ/D,MAAQX,EAAKW,OAEhEmG,EAASyB,MAEVZ,OAAM,SAACC,GACNC,QAAQC,IAAIF,OAwKVnG,MAAOA,IAET,kBAAC,IAAD,CAAO2G,KAAK,WACZ,kBAAC,EAAD,CACA1I,SAtCR,SAAsBgG,GACpBH,EAAKmD,MAAM,CACPrD,SAAUK,EAAKL,SACfpG,MAAOyG,EAAKzG,QAEfuD,MAAK,SAACC,GACHoD,aAAa8C,QAAQ,MAAOlG,EAAIV,OAChCkF,GAAY,GACZC,GAAQc,KAAK,QAEhBL,OAAM,SAACC,GAAD,OAASC,QAAQC,IAAIF,OA6BtB9I,QAASkI,KAET,kBAAC,IAAD,CAAOoB,KAAK,WACZ,kBAAC,EAAD,CACA1I,SAlEN,SAAyBgG,GACvBH,EAAKqD,SAAS,CACZvD,SAAUK,EAAKL,SACfpG,MAAOyG,EAAKzG,QAEbuD,MAAK,SAACC,GACHoF,QAAQC,IAAIrF,GACZ4E,GAAW,CACPhI,QAAQ,EACRL,MAAO,wKACPmH,SAAS,IAEbe,GAAQc,KAAK,cAEhBL,OAAM,SAACC,GACJC,QAAQC,IAAIF,GACZP,GAAW,CACPhI,QAAQ,EACRL,MAAO,sMACPmH,SAAS,QAgDbrH,QAASkI,KAET,kBAAC,IAAD,CAAOmB,OAAK,EAACC,KAAK,KACfxJ,EAAW,kBAAC,IAAD,CAAUC,GAAG,MAAS,kBAAC,IAAD,CAAUA,GAAG,cAGjD,kBAAC,EAAD,MACA,kBAAC,EAAD,CAAkBQ,OAAQgH,EAAwB9G,QAAS+H,GAAgBlD,aA/HjF,SAA0BsD,GACxB7F,EAAIgH,cAAc,WAAYnB,GAAUlF,MAAK,SAAAsG,GAC3CjC,EAAeiC,GACfxB,QAECK,OAAM,SAACC,GACNC,QAAQC,IAAIF,SA0HZ,kBAAC,EAAD,CAAiBvI,OAAQoH,EAAuBlH,QAAS+H,GAAgB7C,eAtH/E,SAA4BsE,GAC1BlH,EAAImH,YAAY,kBAAmBD,GAAYvG,MAAK,SAAAyG,GAClDpC,EAAeoC,GACf3B,QAECK,OAAM,SAACC,GACNC,QAAQC,IAAIF,SAiHZ,kBAAC,EAAD,CAAevI,OAAQkH,EAAqBhH,QAAS+H,GAAgB9F,WA7G3E,SAAwB0H,GACtBrH,EAAIsH,YAAY,QAASD,GAAU1G,MAAK,SAAAoC,GACtCkC,EAAS,CAAClC,GAAF,mBAAcnD,KACtB6F,QAECK,OAAM,SAACC,GACNC,QAAQC,IAAIF,SAwGZ,kBAAC,EAAD,CAAapC,QAAS4B,GAAS7H,QAAS+H,QC5O5B8B,QACW,cAA7BC,OAAOC,SAASC,UAEe,UAA7BF,OAAOC,SAASC,UAEhBF,OAAOC,SAASC,SAASC,MACvB,2DCXNC,IAASC,OACP,kBAAC,IAAMC,WAAP,KACE,kBAAC,IAAD,KACA,kBAAC,EAAD,QAGFC,SAASC,eAAe,SDsHpB,kBAAmBC,WACrBA,UAAUC,cAAcC,MACrBxH,MAAK,SAAAyH,GACJA,EAAaC,gBAEdvC,OAAM,SAAAwC,GACLtC,QAAQsC,MAAMA,EAAMC,c","file":"static/js/main.b14c5dd8.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.c6f11019.svg\";","import React from 'react';\nimport Logo from '../images/logo.svg'\nimport { Link } from 'react-router-dom';\n\nfunction Header(props) {\n  return (\n    <header className=\"header\">\n      <div className=\"header__logo\" src={Logo}></div>\n      {props.loggedIn ? '' : <Link className=\"header__link\" to={`/${props.setLink.link ? 'signin' : 'signup'}`} >{props.setLink.title}</Link>}\n      <div className={`header__container ${props.loggedIn ? '' : 'header__container_invisible '}`}>\n      <h3 className=\"header__email\">{props.email}</h3>\n      <button className=\"header__button\" type='button' onClick={props.onClick}>Выйти</button>\n      </div>\n    </header>\n  )\n}\n\nexport default Header;","import React from 'react';\n\nfunction PopupWithForm(props) {\n  return (\n    <section className={props.isOpen ? `popup popup__${props.name} popup_opened` : `popup popup__${props.name}`}>\n      <div className=\"popup__container\">\n        <button type=\"button\" className=\"popup__close popup__close-btn\" onClick={props.onClose}></button>\n        <h2 className=\"popup__title\">{props.title}</h2>\n        <form name={props.formName} className=\"popup__form\" noValidate onSubmit={props.onSubmit}>\n          {props.children}\n          <button type=\"submit\" className=\"popup__submit-button\">{props.buttonTitle}</button>\n        </form>\n      </div>\n    </section>\n  )\n}\n\nexport default PopupWithForm;","import React from 'react';\n\nfunction ImagePopup(props) {\n  return (\n    <section className={Object.keys(props.card).length > 0 ? `popup popup__increase-img popup_opened` : `popup popup__increase-img`}>\n      <div className=\"popup__container-increase\">\n        <button type=\"button\" className=\"popup__close-img popup__close-btn\" onClick={props.onClose}></button>\n        <figure className=\"popup__figure\">\n          <img alt={props.card.name} src={props.card.link} className=\"popup__img\" />\n          <figcaption className=\"popup__figcaption\">{props.card.name}</figcaption>\n        </figure>\n      </div>\n    </section>\n  )\n}\n\nexport default ImagePopup;\n\n\n","import React from 'react';\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\n\nfunction Card(props) {\n  const currentUser = React.useContext(CurrentUserContext)\n  // Определяем, являемся ли мы владельцем текущей карточки\n  const isOwn = props.card.owner._id === currentUser._id;\n\n  // Создаём переменную, которую после зададим в `className` для кнопки удаления\n  const cardDeleteButtonClassName = (\n    isOwn ? 'elements__trash elements__trash_active' : 'elements__trash'\n  );\n\n\n  function handleClick() {\n    props.onCardClick(props.card);\n  }\n\n  function handleLikeClick() {\n    props.onCardLike(props.card);\n  }\n\n  function handleDeleteClick() {\n    props.onCardDelete(props.card);\n  }\n\n  // Определяем, есть ли у карточки лайк, поставленный текущим пользователем\n  const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n\n  // Создаём переменную, которую после зададим в `className` для кнопки лайка\n  const cardLikeButtonClassName = (\n    isLiked ? 'elements__like elements__like_active' : 'elements__like'\n  );\n\n  return (\n    <li className=\"elements__list-item\">\n      <figure className=\"elements__figure\">\n        <button type=\"reset\" className={cardDeleteButtonClassName} onClick={handleDeleteClick}></button>\n        <img className=\"elements__image\" src={props.card.link} alt={props.card.name} onClick={handleClick} />\n        <figcaption className=\"elements__figcaption\">\n          <h3 className=\"elements__title\">{props.card.name}</h3>\n          <div className=\"elements__like_group\">\n            <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick}></button>\n            <span className=\"elements__like_number\">{props.card.likes.length}</span>\n          </div>\n        </figcaption>\n      </figure>\n    </li>\n  )\n}\n\nexport default Card;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport ImagePopup from './ImagePopup.js';\n// import api from '../utils/Api.js';\nimport Card from './Card.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext)\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <div className=\"profile__group\" onClick={props.onEditAvatar}>\n          <img src={currentUser.avatar} className=\"profile__avatar\" alt=\"фото\" />\n          <div className=\"profile__avatar_pencil\"></div>\n        </div>\n\n        <div className=\"profile__info\">\n          <div className=\"profile__wrapper\">\n            <h1 className=\"profile__title\">{currentUser.name}</h1>\n            <p className=\"profile__subtitle\">{currentUser.about}</p></div>\n          <button type=\"button\" className=\"profile__edit-button\" onClick={props.onEditProfile}></button>\n        </div>\n        <button type=\"button\" className=\"profile__add-button\" onClick={props.onAddPlace}></button>\n      </section>\n      <section className=\"elements\">\n        <ul className=\"elements__list\">\n          {props.cards.map((card, _id) => (\n            <Card key={card._id}\n              card={card}\n              onCardClick={props.onCardClick}\n              onCardLike={props.onCardLike}\n              onCardDelete={props.onCardDelete} />\n          ))}\n        </ul>\n      </section>\n      <ImagePopup\n        card={props.card}\n        onClose={props.onClose} />\n      <PopupWithForm name=\"question\" title=\"Вы уверены?\" buttonTitle=\"Да\" />\n    </main>\n  )\n}\n\nexport default Main;","import React from 'react';\n\nfunction Footer() {\n  return (\n    <section className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </section>\n  )\n}\n\nexport default Footer;","class Api {\n    constructor(baseUrl, token) {\n        this._baseUrl = baseUrl\n        this._token = token;\n\n    }\n\n    getItems(url) {\n        return fetch(/*`${this.baseUrl}/users/me`*/this._baseUrl + url, {\n            method: 'GET',\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            }\n        })\n\n            .then((res) => {\n                if (res.ok) {\n                    return res.json();\n                }\n                return Promise.reject(`Ошибка: ${res.status}`)\n            })\n    }\n\n    patchUserInfo(url, value) {\n        return fetch(/*`${this.baseUrl}/users/me`*/this._baseUrl + url, {\n            method: 'PATCH',\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                name: /*'Marie Skłodowska Curie',*/value.name,\n                about: /*'Physicist and Chemist'*/value.about\n            })\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json()\n                }\n                return Promise.reject(`Ошибка: ${res.status}`)\n            })\n    }\n\n\n    postNewCard(url, values) {\n        return fetch(this._baseUrl + url, {\n            method: 'POST',\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                name: values.name,\n                link: values.link\n            })\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json()\n                }\n                return Promise.reject(`Ошибка: ${res.status}`)\n            })\n    }\n\n    patchAvatar(url, item) {\n        return fetch(this._baseUrl + url, {\n            method: 'PATCH',\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                avatar: item.avatar\n            })\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json()\n                }\n                return Promise.reject(`Ошибка: ${res.status}`)\n            })\n    }\n\n\n    deleteItems(url) {\n        return fetch(this._baseUrl + url, {\n            method: 'DELETE',\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json()\n                }\n                return Promise.reject(`Ошибка: ${res.status}`)\n            })\n    }\n\n    putLike(url) {\n        return fetch(this._baseUrl + url, {\n            method: 'PUT',\n            headers: {\n                authorization: this._token,\n                'Content-Type': 'application/json'\n            }\n        })\n            .then(res => {\n                if (res.ok) {\n                    return res.json()\n                }\n                return Promise.reject(`Ошибка: ${res.status}`)\n            })\n    }\n}\n\nconst api = new Api('https://mesto.nomoreparties.co/v1/cohort-15/', 'ec958303-2883-4fc9-affb-18ff9d007ba6')\nexport default api;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js'\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\n\nfunction EditProfilePopup(props) {\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n  const currentUser = React.useContext(CurrentUserContext);\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  function handleChangeName(e) {\n    setName(e.target.value)\n  }\n\n  function handleChangeDescription(e) {\n    setDescription(e.target.value)\n  }\n\n  function handleSubmit(e) {\n    // Запрещаем браузеру переходить по адресу формы\n    e.preventDefault();\n\n    // Передаём значения управляемых компонентов во внешний обработчик\n    props.onUpdateUser({\n      name,\n      about: description,\n    });\n  }\n\n  return (\n    <PopupWithForm name=\"edit-profile\" title=\"Редактировать профиль\" formName=\"edit-form\" children={\n      <>\n        <input type=\"text\" name=\"name\" id=\"name-input\" className=\"popup__item popup__item_name\" required minLength=\"2\" maxLength=\"40\" placeholder=\"Имя\"\n          onChange={handleChangeName} value={name || ''}\n        />\n        <span id=\"name-input-error\" className=\"popup__input-error\">Вы пропустили это поле</span>\n        <input type=\"text\" name=\"job\" id=\"job-input\" className=\"popup__item popup__item_job\" required minLength=\"2\" maxLength=\"200\" placeholder=\"Занятие\"\n          onChange={handleChangeDescription} value={description || ''}/>\n        <span id=\"job-input-error\" className=\"popup__input-error\">Вы пропустили это поле</span>\n      </>\n    }\n      buttonTitle=\"Сохранить\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}\n    />\n  )\n}\n\nexport default EditProfilePopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\n\nfunction EditAvatarPopup(props) {\n  const avatarRef = React.useRef();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onUpdateAvatar({\n      avatar: avatarRef.current.value,\n    });\n  }\n  return (\n    <PopupWithForm name=\"editavatar\" title=\"Обновить аватар\" formName=\"edit-avatar\" children={\n      <>\n        <input ref={avatarRef} type=\"url\" id=\"avatar-input\" name=\"link\" placeholder=\"Ссылка\" className=\"popup__item popup__item_avatar\" required minLength=\"1\" />\n        <span id=\"avatar-input-error\" className=\"popup__input-error\">Вы пропустили это поле</span>\n      </>\n    }\n      buttonTitle=\"Сохранить\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}\n    />\n  )\n}\n\nexport default EditAvatarPopup","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\n\nfunction AddPlacePopup(props) {\n  const [newCard, setNewCard] = React.useState({ name: '', link: '' });\n\n  function handleNameinput(evt) {\n    setNewCard({ ...newCard, name: evt.target.value })\n  }\n\n  function handleLinkInput(evt) {\n    setNewCard({ ...newCard, link: evt.target.value })\n  }\n\n  function handleSubmit(evt) {\n    evt.preventDefault();\n    props.onAddPlace(newCard);\n  }\n\n\n\n  return (\n    <PopupWithForm name=\"add-card\" title=\"Новое место\" formName=\"add-form\" children={\n      <>\n        <input onChange={handleNameinput} type=\"text\" name=\"placename\" id=\"place-name-input\" placeholder=\"Название\" \n        className=\"popup__item popupadd__item_place-name\" required minLength=\"1\" maxLength=\"30\" \n        value={newCard.name}\n        />\n        <span id=\"place-name-input-error\" className=\"popup__input-error\">Вы пропустили это поле</span>\n        <input onChange={handleLinkInput} type=\"url\" name=\"placeimg\" id=\"place-img-input\" placeholder=\"Ссылка на картинку\" \n        className=\"popup__item popupadd__item_place-img\" required value={newCard.link}/>\n        <span id=\"place-img-input-error\" className=\"popup__input-error\">Введите адрес сайта</span>\n      </>\n    }\n      buttonTitle=\"Создать\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}\n    />\n  )\n}\n\nexport default AddPlacePopup","import React from 'react';\nimport { Link } from 'react-router-dom';\n\n\nfunction FormAuthLog(props) {\n  function handleEmailInput (evt) {\n    props.setEmail(evt.target.value);\n}\nfunction handlePasswordInput (evt) {\n    props.setPassword(evt.target.value);\n}\nfunction submitHandler (evt) {\n    evt.preventDefault();\n    props.onSubmit();\n}\nreturn (\n  <form className=\"formauth\" onSubmit={submitHandler}>\n    <h2 className=\"formauth__title\">{props.title}</h2>\n    <div className=\"formauth__container\">\n      <input onChange={handleEmailInput} type=\"email\" className=\"formauth__input\" placeholder=\"Email\" required></input>\n      <input onChange={handlePasswordInput} type=\"password\" className=\"formauth__input\" placeholder=\"Пароль\" required></input>\n    </div>\n    <button type=\"submit\" className=\"formauth__submit-button\">{props.buttonTitle}</button>\n    <Link className=\"formauth__link\" to={props.route}>{props.linkTitle}</Link>\n  </form>\n\n)\n}\n\nexport default FormAuthLog;","import React from 'react';\nimport FormAuthLog from './FormAuthLog.js'\n\nfunction Login(props) {\n  const [email, setEmail] = React.useState('');\n  const [password, setPassword] = React.useState('');\n\n  React.useEffect(() => {\n    props.setLink({title: 'Регистация', link: false});\n}, []);\n\n  function onSubmit() {\n    props.onSubmit({\n      password: password,\n      email: email\n    })\n  }\n\n  return (\n    <FormAuthLog title=\"Вход\" buttonTitle=\"Войти\" linkTitle = \"Ещё не зарегистрированы? Регистрация\" \n    route=\"/signup\" onSubmit = { onSubmit }\n    setEmail = { setEmail }\n    setPassword = { setPassword } />\n  )\n}\n\nexport default Login;","import React from 'react';\nimport FormAuthLog from './FormAuthLog.js'\n\nfunction Register(props) {\n    const [email, setEmail] = React.useState('');\n    const [password, setPassword] = React.useState('');\n\n    React.useEffect(() => {\n        props.setLink({ title: 'Войти', link: true });\n    }, [])\n\n    function onSubmit() {\n        props.onSubmit({\n            password: password,\n            email: email\n        })\n    }\n\n    return ( <\n        FormAuthLog title = \"Регистрация\"\n        buttonTitle = \"Зарегестрироваться\"\n        linkTitle = \"Уже зарегистрированы? Войти\"\n        route = \"/signin\"  //нужна ли точка\n        onSubmit = { onSubmit }\n        setEmail = { setEmail }\n        setPassword = { setPassword }\n        />\n    )\n}\n\nexport default Register;","class Auth {\n    constructor(options) {\n        this._baseUrl = options.baseUrl;\n        this._headers = options.headers;\n    }\n\n\n    register(data) {\n        return fetch(`${this._baseUrl}/signup`, {\n                method: 'POST',\n                headers: this._headers,\n                body: JSON.stringify({\n                    password: data.password,\n                    email: data.email\n                })\n            })\n            .then((res) => res.ok ? res.json() : Promise.reject(`${res.status} ${res.statusText}`));\n    }\n\n    login(data) {\n        return fetch(`${this._baseUrl}/signin`, {\n                method: 'POST',\n                headers: this._headers,\n                body: JSON.stringify({\n                    password: data.password,\n                    email: data.email\n                })\n            })\n            .then((res) => res.ok ? res.json() : Promise.reject(`${res.status} ${res.statusText}`));\n    }\n\n    getToken() {\n        const jwt = localStorage.getItem('jwt');\n        return fetch(`${this._baseUrl}/users/me`, {\n                method: 'GET',\n                headers: {\n                    ...this._headers,\n                    \"Authorization\": `Bearer ${jwt}`\n                }\n            })\n            .then(res => res.ok ? res.json() : Promise.reject(`${res.status} ${res.statusText}`));\n    }\n}\n\nconst auth = new Auth({\n    baseUrl: 'https://auth.nomoreparties.co',\n    headers: {\n        \"Content-Type\": \"application/json\"\n    }\n})\n\nexport default auth;","import React from 'react';\nimport { Route, Redirect } from \"react-router-dom\";\nfunction ProtectedRoute({ component: Component, ...props }) {\n  return (\n    <Route>\n      {\n        () => props.loggedIn === true ? <Component {...props} /> : <Redirect to='/signin' />\n      } \n    </Route>\n  )\n}\nexport default ProtectedRoute;","import React from 'react';\n\nfunction InfoTooltip(props) {\n  return (\n    <section className={`popup ${props.options.isOpen ? \"popup_opened\" : ''}`}>\n      <div className=\"popup__container popup__container_info\">\n      <button type=\"button\" className=\"popup__close popup__close-btn\" onClick={props.onClose}></button>\n      <div className={`popup__info ${props.options.success ? \"popup__info-success\" : 'popup__info-fail'}`}></div>\n      <h2 className=\"popup__info-title\">{props.options.title}</h2>\n      </div>\n      </section>\n  )\n}\n\nexport default  InfoTooltip;","import React from 'react';\nimport '../index.css';\nimport '../components/Header.js'\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext.js'\nimport api from '../utils/Api.js'\nimport EditProfilePopup from './EditProfilePopup.js'\nimport EditAvatarPopup from './EditAvatarPopup.js'\nimport AddPlacePopup from './AddPlacePopup.js'\nimport { Route, Switch, Redirect, useHistory } from 'react-router-dom';\nimport Login from './Login.js';\nimport Register from './Register.js';\nimport auth from '../utils/Auth.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport InfoTooltip from './InfoTooltip.js'\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setcurrentUser] = React.useState({})\n  const [cards, setCards] = React.useState([]);\n  const [headerLink, setHeaderLink] = React.useState({title: '', link: true});\n  const [email, setEmail] = React.useState('');\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const history = useHistory();\n  const [tooltip, setTooltip] = React.useState({\n    isOpen: false,\n    title: '',\n    success: true\n  });\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    (!isLiked ? api.putLike(`cards/likes/${card._id}`) : api.deleteItems(`cards/likes/${card._id}`)).then((newCard) => {\n      // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      // Обновляем стейт\n      setCards(newCards);\n    })\n    .catch((err) => {\n      console.log(err)\n    });\n  }\n\n  function handleCardDelete(card) {\n    api.deleteItems(`cards/${card._id}`)\n      .then(() => {\n        // Формируем новый массив на основе имеющегося, подставляя в него новую карточку\n        const newCards = cards.filter((current) => current._id !== card._id);\n        // Обновляем стейт\n        setCards(newCards);\n      })\n      .catch((err) => {\n        console.log(err)\n      });\n  }\n  React.useEffect(() => {\n    Promise.all([api.getItems('cards'), api.getItems('users/me')])\n      .then(([cardsData, userData]) => {\n        setCards(cardsData);\n        setcurrentUser(userData)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  },\n    []\n  )\n\n\n\n  React.useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n    if (jwt) {\n      auth.getToken()\n        .then((res) => {\n          res.data ? setLoggedIn(true) : setLoggedIn(false);\n          setEmail(res.data.email);\n          history.push('/');\n        })\n        .catch(err => console.log(err));\n    }\n  }, [loggedIn])\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true)\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true)\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true)\n  }\n\n  function handleCardClick(value) {\n    setSelectedCard(value)\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard({});\n    setTooltip({\n      ...tooltip,\n      isOpen: false\n    });\n  }\n\n  function handleUpdateUser(userData) {\n    api.patchUserInfo('users/me', userData).then(newUserInfo => {\n      setcurrentUser(newUserInfo);\n      closeAllPopups();\n    })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  function handleUpdateAvatar(userAvatar) {\n    api.patchAvatar('users/me/avatar', userAvatar).then(newUserAvatar => {\n      setcurrentUser(newUserAvatar);\n      closeAllPopups();\n    })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  function handleAddPlace(cardData) {\n    api.postNewCard('cards', cardData).then(newCard => {\n      setCards([newCard, ...cards]);\n      closeAllPopups();\n    })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  \n  // const tokenCheck = () => {\n  //   const jwt = localStorage.getItem('jwt');\n  //   if (jwt) {\n  //     auth.getToken(jwt)\n  //     .then((res) => {\n  //       if (res.email) {\n  //         res.data ? setLoggedIn(true) : setLoggedIn(false);\n  //         setEmail({\n  //           email: res.email\n  //         });\n  //         setLoggedIn(true);\n  //         history.push('/');\n  //       }\n  //     })\n  //     .catch(err => console.log(err));\n  // } }\n\n\n  // React.useEffect(() => {\n  //   tokenCheck();\n  // }, [tokenCheck]);\n\n  function handleRegister (data) {\n    auth.register({\n      password: data.password,\n      email: data.email\n    })\n    .then((res) => {\n        console.log(res);\n        setTooltip({\n            isOpen: true,\n            title: 'Вы успешно зарегистрировались!',\n            success: true\n        });\n        history.push('/signin');\n    })\n    .catch((err) => {\n        console.log(err);\n        setTooltip({\n            isOpen: true,\n            title: 'Что-то пошло не так! Попробуйте ещё раз.',\n            success: false\n        });\n    })\n}\nfunction handleLogin (data) {\n  auth.login({\n      password: data.password,\n      email: data.email\n  })\n  .then((res) => {\n      localStorage.setItem('jwt', res.token);\n      setLoggedIn(true);\n      history.push('/')\n  })\n  .catch((err) => console.log(err))\n}\nfunction handleLogout () {\n  localStorage.removeItem('jwt');\n  setLoggedIn(false);\n  history.push('/signin');\n}\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header setLink={headerLink} email={email} loggedIn={loggedIn} onClick={handleLogout}/>\n        <Switch>\n        <ProtectedRoute exact path='/'\n          loggedIn={loggedIn}\n          component={Main}\n          onEditAvatar={handleEditAvatarClick}\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onClose={closeAllPopups}\n          onCardClick={handleCardClick}\n          card={selectedCard}\n          onCardLike={handleCardLike}\n          onCardDelete={handleCardDelete}\n          cards={cards}\n        />\n        <Route path='/signin'>\n        <Login \n        onSubmit={handleLogin} \n        setLink={setHeaderLink}/>\n        </Route>\n        <Route path='/signup'>\n        <Register \n        onSubmit={handleRegister} \n        setLink={setHeaderLink}/>\n        </Route>\n        <Route exact path='/'>\n          {loggedIn ? <Redirect to=\"/\" /> : <Redirect to=\"/signin\" />}\n          </Route>\n        </Switch>\n        <Footer />\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n        <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlace} />\n        <InfoTooltip options={tooltip} onClose={closeAllPopups}/>\n\n\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport * as serviceWorker from './serviceWorker';\nimport { BrowserRouter } from 'react-router-dom';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}